<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />


    <title>Microphone Example</title>

    <link rel="stylesheet" type="text/css" href="css/Scrolling.Scrollbar.css" />

    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            width: 100%
        }
    </style>

    <script type="text/javascript" src="ts/FormatDate.js"></script>


    <script>

    </script>


    <style>

    </style>

</head>
<body>
    <input type="file" accept="audio/*" capture id="recorder">
    <audio id="player" controls="controls"></audio>

    <script>
        const player = document.getElementById('player');

        const handleSuccess = function (stream)
        {
            if (window.URL)
            {
                player.srcObject = stream;
            } else
            {
                player.src = stream;
            }
        };

        navigator.mediaDevices.getUserMedia({ audio: true, video: false })
            .then(handleSuccess);



        function enumerateMicrophones()
        {
            navigator.mediaDevices.enumerateDevices().then((devices) =>
            {
                devices = devices.filter((d) => d.kind === 'audioinput');
            });



            navigator.mediaDevices.getUserMedia({
                audio: {
                    deviceId: devices[0].deviceId
                }
            });
        }


        function askPermission()
        {
            navigator.permissions.query({ name: 'microphone' }).then(function (result)
            {
                if (result.state == 'granted')
                {

                } else if (result.state == 'prompt')
                {

                } else if (result.state == 'denied')
                {

                }
                result.onchange = function ()
                {

                };
            });
        }


    </script>


    <script type="text/javascript">
        function autorun()
        {

        }

        if (window.addEventListener) window.addEventListener("load", autorun, false);
        else if (window.attachEvent) window.attachEvent("onload", autorun);
        else window.onload = autorun;
    </script>
</body>
</html>
